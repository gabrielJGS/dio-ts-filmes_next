(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(5075)}])},7932:function(a,b,c){"use strict";c.d(b,{Z:function(){return k}});var d=c(7568),e=c(1438),f=c(4051),g=c.n(f),h=c(9669),i=c.n(h),j="https://api.themoviedb.org/3",k=function(){function a(b,c,d){var f=arguments.length>3&& void 0!==arguments[3]?arguments[3]:"",g=arguments.length>4&& void 0!==arguments[4]?arguments[4]:"",h=arguments.length>5&& void 0!==arguments[5]?arguments[5]:"";(0,e.Z)(this,a),this.login=b,this.password=c,this.apiKey=d,this.requestToken=f,this.sessionId=h,this.account_id=g}var b=a.prototype;return b.criarRequestToken=function(){var a=this;return(0,d.Z)(g().mark(function b(){var c;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(a.requestToken&&""!=a.requestToken)){b.next=2;break}return b.abrupt("return");case 2:return c="".concat(j,"/authentication/token/new?api_key=").concat(a.apiKey),b.next=5,i().get(c).then(function(b){return a.requestToken=b.data.request_token,b.data.request_token}).catch(function(a){console.error(a)});case 5:case"end":return b.stop()}},b)}))()},b.logar=function(){var a=this;return(0,d.Z)(g().mark(function b(){var c,d;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return c="".concat(j,"/authentication/token/validate_with_login?api_key=").concat(a.apiKey),d={username:"".concat(a.login),password:"".concat(a.password),request_token:"".concat(a.requestToken)},b.next=4,i().post(c,d).catch(function(a){console.error(a)});case 4:case"end":return b.stop()}},b)}))()},b.criarSessao=function(){var a=this;return(0,d.Z)(g().mark(function b(){var c,d;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!a.sessionId){b.next=2;break}return b.abrupt("return");case 2:return c="".concat(j,"/authentication/session/new?api_key=").concat(a.apiKey,"&request_token=").concat(a.requestToken),b.next=5,i().get(c).catch(function(a){console.error(a.response.data)});case 5:if(!(d=b.sent).data.session_id){b.next=9;break}return a.sessionId=d.data.session_id,b.abrupt("return",d.data.session_id);case 9:case"end":return b.stop()}},b)}))()},b.criarLista=function(a,b){var c=this;return(0,d.Z)(g().mark(function d(){var e;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e="https://api.themoviedb.org/3/list?api_key=".concat(c.apiKey,"&session_id=").concat(c.sessionId),d.next=3,i().post(e,{name:a,description:b,language:"pt-br"}).catch(function(a){console.error(a.response.data)});case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},d)}))()},b.adicionarFilmeNaLista=function(a,b){var c=this;return(0,d.Z)(g().mark(function d(){var e;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return e="https://api.themoviedb.org/3/list/".concat(b,"/add_item?api_key=").concat(c.apiKey,"&session_id=").concat(c.sessionId),d.next=3,i().post(e,{media_id:a}).catch(function(a){console.error(a.response.data)});case 3:return d.abrupt("return",d.sent);case 4:case"end":return d.stop()}},d)}))()},b.pegarLista=function(a){var b=this;return(0,d.Z)(g().mark(function c(){var d,e;return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return d="https://api.themoviedb.org/3/list/".concat(a,"?api_key=").concat(b.apiKey,"&language=pt-BR"),c.next=3,i().get(d).catch(function(a){console.error(a.response.data)});case 3:return e=c.sent,c.abrupt("return",e.data);case 5:case"end":return c.stop()}},c)}))()},b.getDetails=function(){var a=this;return(0,d.Z)(g().mark(function b(){var c,d;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(a.sessionId){b.next=2;break}return b.abrupt("return",void 0);case 2:return c="https://api.themoviedb.org/3/account?api_key=".concat(a.apiKey,"&session_id=").concat(a.sessionId),b.next=5,i().get(c).catch(function(a){console.error(a.response.data)});case 5:return d=b.sent,a.account_id=d.data.id,b.abrupt("return",d.data.id);case 8:case"end":return b.stop()}},b)}))()},b.getLists=function(){var a=this;return(0,d.Z)(g().mark(function b(){var c,d;return g().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(a.account_id){b.next=3;break}return b.next=3,a.getDetails();case 3:return c="https://api.themoviedb.org/3/account/".concat(a.account_id,"/lists?api_key=").concat(a.apiKey,"&session_id=").concat(a.sessionId),b.next=6,i().get(c).catch(function(a){console.error(a.response.data)});case 6:return d=b.sent,b.abrupt("return",d.data);case 8:case"end":return b.stop()}},b)}))()},b.procurarFilme=function(a){var b=this;return(0,d.Z)(g().mark(function c(){var d,e;return g().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return a=encodeURI(a),d="https://api.themoviedb.org/3/search/movie?api_key=".concat(b.apiKey,"&query=").concat(a,"&language=pt-BR"),c.next=4,i().get(d).catch(function(a){console.error(a.response.data)});case 4:return e=c.sent,c.abrupt("return",e.data);case 6:case"end":return c.stop()}},c)}))()},b.removeMovie=function(a,b){var c=this;return(0,d.Z)(g().mark(function d(){var e,f;return g().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:if(c.account_id){d.next=3;break}return d.next=3,c.getDetails();case 3:return e="https://api.themoviedb.org/3/list/".concat(a,"/remove_item?api_key=").concat(c.apiKey,"&session_id=").concat(c.sessionId),d.next=6,i().post(e,{media_id:b}).catch(function(a){console.error(a.response.data)});case 6:return f=d.sent,d.abrupt("return",f.data);case 8:case"end":return d.stop()}},d)}))()},a}()},5075:function(a,b,c){"use strict";c.r(b);var d=c(7568),e=c(4051),f=c.n(e),g=c(5893),h=c(7357),i=c(5861),j=c(3457),k=c(6680),l=c(9840),m=c(2474),n=c(3946),o=c(8462),p=c(891),q=c(9334),r=c(5663),s=c(9661),t=c(3205),u=c(1733),v=c(8987),w=c(7294),x=c(7932),y=c(1163),z=function(){var a,b=(0,y.useRouter)(),c="https://image.tmdb.org/t/p/w200",e=(0,w.useState)(!1),z=e[0],A=e[1],B=(0,w.useState)(""),C=B[0],D=B[1],E=(0,w.useState)(0),F=E[0],G=E[1],H=(0,w.useState)(""),I=H[0],J=H[1],K=(0,w.useState)([]),L=K[0],M=K[1],N=(0,w.useState)(0),O=(N[0],N[1]),P=(0,w.useState)(!1),Q=P[0],R=P[1],S=(0,w.useState)(""),T=S[0],U=S[1],V=(0,w.useState)([]),W=V[0],X=V[1],Y=(0,w.useState)(0);Y[0],Y[1];var Z=(0,w.useState)(!1),$=Z[0],_=Z[1],aa=(0,w.useState)([]),ab=aa[0],ac=aa[1],ad=(0,w.useState)(0);ad[0],ad[1];var ae=localStorage.getItem("user");if(ae){var af=JSON.parse(ae);a=new x.Z(af.login,af.password,af.apiKey,"","",af.sessionId)}else b.push("./login");(0,w.useEffect)(function(){function b(){return(b=(0,d.Z)(f().mark(function b(){return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(a.requestToken){b.next=9;break}return b.next=3,a.criarRequestToken();case 3:return b.next=5,a.logar();case 5:return b.next=7,a.criarSessao();case 7:return b.next=9,a.getDetails();case 9:a.getLists().then(function(a){O(a.page),M(a.results)});case 10:case"end":return b.stop()}},b)}))).apply(this,arguments)}a&&function(){b.apply(this,arguments)}()},[]);var ag,ah,ai,aj,ak,al,am=(ag=(0,d.Z)(f().mark(function b(){return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(C.length<4)){b.next=3;break}return alert("Preencha o nome antes de criar uma lista"),b.abrupt("return");case 3:if(!z){b.next=5;break}return b.abrupt("return");case 5:return A(!0),b.next=8,a.criarLista(C,"");case 8:a.getLists().then(function(a){O(a.page),M(a.results),A(!1),alert("Lista criada!")});case 9:case"end":return b.stop()}},b)})),function(){return ag.apply(this,arguments)}),an=(ah=(0,d.Z)(f().mark(function b(){var c;return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!(T.length<4)){b.next=3;break}return alert("Preencha o campo antes de pesquisar"),b.abrupt("return");case 3:if(!Q){b.next=5;break}return b.abrupt("return");case 5:return R(!0),b.next=8,a.procurarFilme(T);case 8:X((c=b.sent).results),R(!1);case 11:case"end":return b.stop()}},b)})),function(){return ah.apply(this,arguments)}),ao=(ai=(0,d.Z)(f().mark(function b(c){var d;return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(0!=c){b.next=2;break}return b.abrupt("return");case 2:if(!$){b.next=4;break}return b.abrupt("return");case 4:return _(!0),b.next=7,a.adicionarFilmeNaLista(c.id,F);case 7:return d=b.sent,console.log(d),b.next=11,aq(F);case 11:_(!1);case 12:case"end":return b.stop()}},b)})),function(a){return ai.apply(this,arguments)}),ap=(aj=(0,d.Z)(f().mark(function a(b){var c;return f().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(0!=b.target.value){a.next=2;break}return a.abrupt("return");case 2:return G(Number(b.target.value)),(c=L.find(function(a){return a.id==b.target.value}))&&J(c.name),a.next=7,aq(Number(b.target.value));case 7:case"end":return a.stop()}},a)})),function(a){return aj.apply(this,arguments)}),aq=(ak=(0,d.Z)(f().mark(function b(c){var d;return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!$){b.next=2;break}return b.abrupt("return");case 2:return _(!0),b.next=5,a.pegarLista(c);case 5:ac((d=b.sent).items),_(!1);case 8:case"end":return b.stop()}},b)})),function(a){return ak.apply(this,arguments)}),ar=(al=(0,d.Z)(f().mark(function b(c){var d;return f().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!$){b.next=2;break}return b.abrupt("return");case 2:return _(!0),b.next=5,a.removeMovie(F,c.id);case 5:return d=b.sent,b.next=8,aq(F);case 8:_(!1),alert("Filme ".concat(c.title," removido da lista"));case 10:case"end":return b.stop()}},b)})),function(a){return al.apply(this,arguments)});return(0,g.jsxs)(h.Z,{m:2,pt:3,sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:"60%"},children:[(0,g.jsx)(i.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"P\xe1gina inicial"}),(0,g.jsxs)(h.Z,{sx:{border:"1px solid lightgrey",borderRadius:"5px",padding:"1rem",width:"100%"},children:[(0,g.jsx)(i.Z,{variant:"h5",component:"h2",gutterBottom:!0,sx:{textAlign:"center"},children:"Listas de filmes"}),(0,g.jsxs)(j.Z,{row:!0,sx:{display:"flex",justifyContent:"space-around"},children:[(0,g.jsxs)(k.Z,{name:I,value:F,label:"Lista de filmes",onChange:function(a){return ap(a)},sx:{width:"40%"},children:[(0,g.jsx)(l.Z,{value:0,children:"Selecione uma lista"}),L.length>0?L.map(function(a){return(0,g.jsx)(l.Z,{value:a.id,children:a.name},a.id)}):null]}),(0,g.jsx)(m.Z,{variant:"standard",placeholder:"Crie uma nova lista",sx:{width:"40%"},onKeyDown:function(a){"Enter"===a.key&&am()},onChange:function(a){return D(a.target.value)}}),(0,g.jsx)(v.Z,{loading:z,variant:"outlined",onClick:am,children:"Salvar"})]})]}),(0,g.jsx)(i.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"Filmes"}),(0,g.jsxs)(h.Z,{sx:{border:"1px solid lightgrey",borderRadius:"5px",padding:"1rem",width:"100%",display:"flex",flexDirection:"row"},children:[(0,g.jsxs)(h.Z,{sx:{border:"1px solid lightgrey",borderRadius:"5px",padding:"1rem",width:"90%"},children:[(0,g.jsxs)(j.Z,{row:!0,sx:{display:"flex",justifyContent:"space-around"},children:[(0,g.jsx)(m.Z,{variant:"standard",placeholder:"Busque um filme",sx:{width:"70%"},onKeyDown:function(a){"Enter"===a.key&&an()},onChange:function(a){return U(a.target.value)}}),(0,g.jsx)(v.Z,{loading:Q,variant:"outlined",onClick:an,children:"Pesquisar"})]}),(0,g.jsx)(o.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:W.length>0?W.map(function(a){return(0,g.jsxs)(p.ZP,{secondaryAction:(0,g.jsx)(n.Z,{edge:"end","aria-label":"addToList",onClick:function(){ao(a)},children:(0,g.jsx)(t.Z,{})}),children:[(0,g.jsx)(r.Z,{children:(0,g.jsx)(s.Z,{src:"".concat(c).concat(a.backdrop_path)})}),(0,g.jsx)(q.Z,{primary:a.title,secondary:a.original_title})]},a.id)}):null})]}),(0,g.jsxs)(h.Z,{sx:{border:"1px solid lightgrey",borderRadius:"5px",padding:"1rem",width:"90%"},children:[(0,g.jsx)(i.Z,{variant:"h6",component:"h4",gutterBottom:!0,children:L.length>0&&0!=F?"Filmes da lista "+I:""}),(0,g.jsx)(o.Z,{sx:{width:"100%",maxWidth:360,bgcolor:"background.paper"},children:ab&&ab.length>0?ab.map(function(a){return(0,g.jsxs)(p.ZP,{secondaryAction:(0,g.jsx)(n.Z,{edge:"end","aria-label":"removeFromList",onClick:function(){ar(a)},children:(0,g.jsx)(u.Z,{})}),children:[(0,g.jsx)(r.Z,{children:(0,g.jsx)(s.Z,{src:"".concat(c).concat(a.backdrop_path)})}),(0,g.jsx)(q.Z,{primary:a.title,secondary:a.original_title})]},a.id)}):null})]})]})]})};b.default=z}},function(a){a.O(0,[999,729,774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])